<crates-view-layout 
  [title]="title"
  [showSearch]="false"
  [showListToggle]="false">
  <div class="list-content">
    
    <!-- Back Button -->
    <div class="back-button-container">
      <button class="btn btn-outline-secondary btn-sm" (click)="onBackClick()">
        <i class="bi-arrow-left me-2"></i>
        Back to Settings
      </button>
    </div>

    <!-- Error Message -->
    <div *ngIf="error$ | async as error" class="alert alert-danger" role="alert">
      <i class="bi-exclamation-triangle me-2"></i>
      {{ error.message || 'Failed to load data. Please try again.' }}
    </div>

    <!-- Loading State -->
    <div *ngIf="(isLoading$ | async) && users.length === 0" class="loading-container">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="loading-text">Loading {{ listType }}...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!(isLoading$ | async) && users.length === 0 && !(error$ | async)" class="empty-state">
      <i [class]="emptyStateIcon + ' empty-icon'"></i>
      <h3>{{ emptyStateTitle }}</h3>
      <p>{{ emptyStateMessage }}</p>
    </div>

    <!-- Users List -->
    <div *ngIf="users.length > 0" class="users-list">
      <div *ngFor="let follow of users" class="user-item">
        <div class="user-avatar">
          <img 
            *ngIf="getUser(follow).images && getUser(follow).images.length > 0" 
            [src]="getUser(follow).images[0].url" 
            [alt]="getUserDisplayName(getUser(follow))"
            class="avatar-image">
          <div 
            *ngIf="!getUser(follow).images || getUser(follow).images.length === 0" 
            class="avatar-placeholder">
            <i class="bi-person-circle"></i>
          </div>
        </div>
        
        <div class="user-info">
          <div class="user-name">
            <a [routerLink]="getUserProfileLink(getUser(follow))" class="user-link">
              {{ getUserDisplayName(getUser(follow)) }}
            </a>
          </div>
          <div class="user-bio" *ngIf="getUser(follow).bio">
            {{ getUser(follow).bio }}
          </div>
          <div class="follow-date">
            {{ listType === 'following' ? 'Following' : 'Followed you' }} since {{ follow.createdAt | date:'MMM d, y' }}
          </div>
        </div>
        
        <div class="user-actions">
          <app-follow-button 
            [userId]="getUser(follow).id"
            [size]="'sm'"
            (followChange)="onFollowChange(getUser(follow).id, $event)">
          </app-follow-button>
        </div>
      </div>
    </div>

    <!-- Load More Button -->
    <div *ngIf="hasMore && users.length > 0" class="load-more-container">
      <button 
        class="btn btn-outline-primary" 
        (click)="onLoadMore()"
        [disabled]="isLoading$ | async">
        <span *ngIf="isLoading$ | async" class="spinner-border spinner-border-sm me-2" role="status"></span>
        {{ (isLoading$ | async) ? 'Loading...' : 'Load More' }}
      </button>
    </div>
  </div>
</crates-view-layout>